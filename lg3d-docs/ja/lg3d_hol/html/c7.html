<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Swingを利用する（JFrame編）</title>
  </head>

  <body bgcolor="white">
    <h1>JavaOne Tokyo Hands on Lab : <br>
        Project Looking Glass (LG3D) Basic Programming</h1>
    <h2>4.7 Swingを利用する（JFrame編）</h2>

   <b>この章で行うこと : </b><br>
   swingコンポーネントであるJFrameをLG3D上で利用します。<br>
   <br>
    <h3>LG3D上でSwingを利用する方法</h3>
    
    <p>LG3Dではファイルチューザやテキストボックスのような2Dコンポーネントは用意されていません。<br>
LG3D は Swing をサポートしており、Swingを用いてこれらの機能を利用出来ます。<br><br>
LG3D での Swing の使用方法は2種類あります。<br>
Swing の JFrame を利用する方法と、LG3Dで提供されているSwingNode (org.jdesktop.lg3d.wg.SwingNode) を利用する方法があります。<br><br>
前者は通常のSwingプログラミングと同様の方法でプログラミングを行うことが出来ます。<br>
表示はシーンマネージャ側で制御しており、新しいフレームとして扱われるためサムネイルが表示されます。<br><br>
後者の場合、JFrame利用時のような枠などが自動的に生成されませんが、
Swingコンポーネントを LG3Dコンポーネントの1つとして扱うことができます。<br>
そのため、LG3Dで提供されている機能を利用し、拡大・縮小・回転などを行うことができます。
また、サムネイルも表示されません。<br>
<br>
	<img src="pictures/c8_01.jpg">
	<img src="pictures/c8_02.jpg">
<br><br>
	<hr>
    <h3>JFrameを利用する</h3>
    <p>JFrameを利用する場合、特別なことをする必要ありません。<br>
    	 通常のSwingプログラムと同様にJFrameを継承したGUIを作成します。<br><br><br>
       <table border><tr><td>
       <pre>public class ChooserFrame extends javax.swing.JFrame {    
       //通常のSwingプログラムのFrame部分
       ・・・ 
}</pre></td></tr></table>
       <br><br>
       呼び出しも<br>
       new ChooserFrame();<br>
       と通常のSwingプログラミングと同様にして呼び出せます。</p>
       <br>
    <ol><li>JFrameを継承したGUIを作成するSwingFrame.javaを作成します。<br>
NetBeansでは、Swingの作成用のGUIエディタを標準装備しているので、これを利用して作成します。<br>
（NetBeans以外の環境を利用している場合は後述のソースコードを参照してください。）<br>
左側のパネルが「<font color="red"><b>プロジェクト</b></font>」となっていることを確認し、TextureBoxプロジェクト内の「<font color="red"><b>ソースパッケージ</b></font>」→「<font color="red"><b>texturebox</b></font>」を選択します。<br>
選択後、右クリックでメニューが表示されるので「<font color="red"><b>新規</b></font>」→「<font color="red"><b>JFrameフォーム</b></font>」を選択します。<br>
<br>
<img src="pictures/c8_06.jpg">
<br><br></li>
<li>クラス情報を入力するためのダイアログが表示されます。<br>
<ul><li>クラス名：<font color="red"><b>SwingFrame</b></font></li></ul>
と入力し、「<font color="red"><b>完了</b></font>」を選択します。<br><br>
<img src="pictures/c8_07.jpg">
<br><br>
</li>
<li>左側のパネルに「SwingFrame」が追加されます。<br>
真ん中のエディタに「SwingFrame」が表示されます。<br>
また、エディタには通常のソースコードではなく、GUIエディタが表示されます。<br>
右側のパネルにパレットが表示され、Swingのコンポーネントが選択できます。<br>
<br>
パレットのJFileChooserを選択し、エディタに貼り付けます。<br>
コンポーネントのサイズも自由に変更できるので好みのサイズに変更してください。<br>
<br>
<img src="pictures/c8_08.jpg">
<br><br><br>
真ん中のエディタの「ソース」タグを選択すると、以下のようなソースが自動で作成されているのがわかります。<br>
<br>
<img src="pictures/c8_09.jpg">
<br><br><br>
<table border>
<tr><td><pre>

package texturebox;

public class SwingFrame extends javax.swing.JFrame {
    
    /** Creates new form SwingFrame */
    public SwingFrame() {
        initComponents();
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc=" Generated Code">                          
    private void initComponents() {
        jFileChooser1 = new javax.swing.JFileChooser();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jFileChooser1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jFileChooser1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        pack();
    }// </editor-fold>                        
    
    // Variables declaration - do not modify                     
    private javax.swing.JFileChooser jFileChooser1;
    // End of variables declaration                   
    
}
</pre></td></tr></table></li>
   <br><br>
<li>TextureBox.javaを以下のように変更します。<br><br>
<table border><tr><td><pre>
/*
 * TextureBox.java
 *
 * Created on 2005/09/29, 15:42
 *
 * To change this template, choose Tools | Options and locate the template under
 * the Source Creation and Management node. Right-click the template and choose
 * Open. You can then make changes to the template in the Source Editor.
 */

package texturebox;

/**
 *
 * @author duke
 */

import java.io.IOException;
import java.net.URL;
import java.lang.ClassLoader;
import javax.vecmath.Vector3f;
import org.jdesktop.lg3d.sg.Appearance;
import org.jdesktop.lg3d.sg.Shape3D;
import org.jdesktop.lg3d.utils.shape.Box;
import org.jdesktop.lg3d.utils.shape.SimpleAppearance;
import org.jdesktop.lg3d.wg.Component3D;
import org.jdesktop.lg3d.wg.Frame3D;

public class TextureBox {
    
    /** Creates a new instance of TextureBox */
    public TextureBox() { 
        
        // フレームの生成
        Frame3D frame = new Frame3D();
		
		
        // シェイプの生成および設定
        // ボックス６面の画像を指定した Appearance の設定
        Appearance appearanceFront = null;
        Appearance appearanceRight = null;
        Appearance appearanceLeft = null;
        Appearance appearanceTop = null;
        Appearance appearanceBottom = null;
        Appearance appearanceBack = null;
        URL url = null;
        ClassLoader loader = this.getClass().getClassLoader();
        
        // SimpleAppearance オブジェクトを作成する際に、
        // テクスチャファイルの読み込みに失敗した場合 IOException
        // を発生させますので、それに対応するためにException処理を追加
        try {
           url = loader.getResource("photo01.jpg");
           appearanceFront = new SimpleAppearance( url );
           // 前面のアピアランスを切替可能にする
           appearanceFront.setCapability(Appearance.ALLOW_TEXTURE_WRITE);
           url = loader.getResource("photo02.jpg");
           appearanceRight = new SimpleAppearance( url );
           url = loader.getResource("photo03.jpg");
           appearanceLeft = new SimpleAppearance( url );
           url = loader.getResource("photo04.jpg");
           appearanceTop = new SimpleAppearance( url );
           url = loader.getResource("photo05.jpg");
           appearanceBottom = new SimpleAppearance( url );
           url = loader.getResource("photo06.jpg");
           appearanceBack = new SimpleAppearance( url );
        } catch (IOException ex) {
            System.err.println("画像ファイルの読み込みに失敗しました。");
            ex.printStackTrace();
        }
        // Box の生成
        // 引数は、幅(x)、高さ(y)、奥行き(z)、フラグ、アピアランス
        // Box.GENERATE_TEXTURE_COORDS は
        // Boxオブジェクトで テクスチャを利用するために必要なフラグです
        // 6面の Appearance を貼り付けるため、とりあえず Box の Appearance を null にします。
       Box box = new Box(0.05f, 0.04f, 0.03f, Box.GENERATE_TEXTURE_COORDS, null);
        
       // 正面
       Shape3D shape = box.getShape(Box.FRONT);
       shape.setAppearance(appearanceFront);

       // 右側
       shape = box.getShape(Box.RIGHT);
       shape.setAppearance(appearanceRight);

       // 左側
       shape = box.getShape(Box.LEFT);
       shape.setAppearance(appearanceLeft);

       // 上
       shape = box.getShape(Box.TOP);
       shape.setAppearance(appearanceTop);

       // 下(底面)
       shape = box.getShape(Box.BOTTOM);
       shape.setAppearance(appearanceBottom);

       // 後
       shape = box.getShape(Box.BACK);
       shape.setAppearance(appearanceBack);

        // コンポーネントの生成
        Component3D component = new Component3D();

        // シェイプをコンポーネントに追加
        component.addChild(box);
        
        // コンポーネントをコンテナに追加
        // ここではコンテナを使用していないので、
        // 直接フレームに追加
        frame.addChild(component);

        // フレームの表示
        // フレームの大きさを設定
        frame.setPreferredSize(new Vector3f(0.1f, 0.08f, 0.06f));

        // フレームの表示
        frame.changeEnabled(true);
        frame.changeVisible(true);
        
        <font color="red"><b>//JFrame呼び出し
        new SwingFrame().setVisible(true);</b></font>
    }
    
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        new TextureBox();

    }
    
}

</pre></td></tr></table>
<br><br></li>
     <li><b>「4.3 Jarベースのアプリケーションの作成と実行」</b> にある <a href="c3.html#jar">「JARベースのアプリケーションの作成」 の ステップ８</a>　を参考して、プロジェクトを構築します。<br>
	  同ページにある <a href="c3.html#run">「JARベースのアプリケーションの実行」</a> を参考して、アプリケーションの実行を行います。<br><br>
	  実行画面は下図のようになります。
      <br><br><br>
      <img src="pictures/c8_03.jpg">
      </li></ol>
      <br><br><br>
      <hr>
    <ul>
    <li><a href="c9.html">「4.8 Swingを利用する（SwingNode編）」に進む</a></li>
    <li><a href="index.html">メニューに戻る</a>
    </ul>
  </body>
</html>
