<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<title>Swingを利用する（SwingNode編）</title>
</head>
<body bgcolor="white">
<h1>JavaOne Tokyo Hands on Lab : <br>
Project Looking Glass (LG3D) Basic Programming</h1>
<h2>4.8 Swingを利用する（SwingNode編）</h2>
<b>この章で行うこと : </b><br>
SwingNodeを利用して、swingコンポーネントであるJFileChooserを利用し、ボックスの前面の画像を変更できるようにします。
また、SwingNodeを利用したJFileChooserに4.7で行ったJFrameを利用した場合に表示されるフレームと似たものを表示させます。<br>
<br>
<hr>
<h3>SwingNodeにJPanelを追加して利用する</h3>
<p>SwingNodeはComponent3Dを継承したクラスです。<br>
setPanel()メソッドを使って、SwingNodeにJPanelを追加することができます。
</p>
<ol><li>JPanelを継承したクラスSwingPanel.javaを以下のように作成します。<br><br>
左側のパネルが「<font color="red"><b>プロジェクト</b></font>」となっていることを確認し、TextureBoxプロジェクト内の「<font color="red"><b>ソースパッケージ</b></font>」→「<font color="red"><b>texturebox</b></font>」を選択します。<br>
選択後、右クリックでメニューが表示されるので「<font color="red"><b>新規</b></font>」→「<font color="red"><b>JPanelフォーム</b></font>」を選択します。<br>
<br>
<img src="pictures/c8_12.jpg">
<br>
<br>
後は「4.7 Swingを利用する（JFrame編）」の２、３の同様の手順で作成すると以下のようなソースコードが自動で作成されます。<br>
<br>
<br>
<table border><tr><td><pre>
/*
 * SwingPanel.java
 *
 * Created on 2007/06/11, 15:49
 */

package texturebox;
/**
 *
 * @author  duke
 */
public class SwingPanel extends javax.swing.JPanel {
    
    /** Creates new form SwingPanel */
    
    public SwingPanel() {
        initComponents();
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc=" Generated Code">                          
    private void initComponents() {
        jFileChooser1 = new javax.swing.JFileChooser();

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jFileChooser1, javax.swing.GroupLayout.PREFERRED_SIZE, 396, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jFileChooser1, javax.swing.GroupLayout.PREFERRED_SIZE, 214, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
    }// </editor-fold>                        

    // Variables declaration - do not modify                     
    private javax.swing.JFileChooser jFileChooser1;
    // End of variables declaration                   
    
}

</pre></td></tr></table>
</li><br><br>
<li>TextureBox.javaを以下のように変更します。<br><br>
SwingNode オブジェクトを作成します。<br>
作成したオブジェクトにSwingNode.setPanel()メソッドを使用してJPanelを追加します。<br><br>
<table border><tr><td>
<pre>/*
 * TextureBox.java
 *
 * Created on 2005/09/29, 15:42
 *
 * To change this template, choose Tools | Options and locate the template under
 * the Source Creation and Management node. Right-click the template and choose
 * Open. You can then make changes to the template in the Source Editor.
 */

package texturebox;

/**
 *
 * @author duke
 */

import java.io.IOException;
import java.net.URL;
import java.lang.ClassLoader;
import javax.vecmath.Vector3f;
import org.jdesktop.lg3d.sg.Appearance;
import org.jdesktop.lg3d.sg.Shape3D;
import org.jdesktop.lg3d.utils.shape.Box;
import org.jdesktop.lg3d.utils.shape.SimpleAppearance;
import org.jdesktop.lg3d.wg.Component3D;
import org.jdesktop.lg3d.wg.Frame3D;
<font color="red"><b>import org.jdesktop.lg3d.wg.SwingNode;</b></font>


public class TextureBox {
    
    /** Creates a new instance of TextureBox */
    public TextureBox() { 
        
        // フレームの生成
        Frame3D frame = new Frame3D();
		
		
        // シェイプの生成および設定
        // ボックス６面の画像を指定した Appearance の設定
        Appearance appearanceFront = null;
        Appearance appearanceRight = null;
        Appearance appearanceLeft = null;
        Appearance appearanceTop = null;
        Appearance appearanceBottom = null;
        Appearance appearanceBack = null;
        URL url = null;
        ClassLoader loader = this.getClass().getClassLoader();

        
        // SimpleAppearance オブジェクトを作成する際に、
        // テクスチャファイルの読み込みに失敗した場合 IOException
        // を発生させますので、それに対応するためにException処理を追加
        try {
           url = loader.getResource("photo01.jpg");
           appearanceFront = new SimpleAppearance( url );
           url = loader.getResource("photo02.jpg");
           appearanceRight = new SimpleAppearance( url );
           url = loader.getResource("photo03.jpg");
           appearanceLeft = new SimpleAppearance( url );
           url = loader.getResource("photo04.jpg");
           appearanceTop = new SimpleAppearance( url );
           url = loader.getResource("photo05.jpg");
           appearanceBottom = new SimpleAppearance( url );
           url = loader.getResource("photo06.jpg");
           appearanceBack = new SimpleAppearance( url );
        } catch (IOException ex) {
            System.err.println("画像ファイルの読み込みに失敗しました。");
            ex.printStackTrace();
        }
        // Box の生成
        // 引数は、幅(x)、高さ(y)、奥行き(z)、フラグ、アピアランス
        // Box.GENERATE_TEXTURE_COORDS は
        // Boxオブジェクトで テクスチャを利用するために必要なフラグです
        // 6面の Appearance を貼り付けるため、とりあえず Box の Appearance を null にします。
       Box box = new Box(0.05f, 0.04f, 0.03f, Box.GENERATE_TEXTURE_COORDS, null);
        
       // 正面
       Shape3D shape = box.getShape(Box.FRONT);
       shape.setAppearance(appearanceFront);

       // 右側
       shape = box.getShape(Box.RIGHT);
       shape.setAppearance(appearanceRight);

       // 左側
       shape = box.getShape(Box.LEFT);
       shape.setAppearance(appearanceLeft);

       // 上
       shape = box.getShape(Box.TOP);
       shape.setAppearance(appearanceTop);

       // 下(底面)
       shape = box.getShape(Box.BOTTOM);
       shape.setAppearance(appearanceBottom);

       // 後
       shape = box.getShape(Box.BACK);
       shape.setAppearance(appearanceBack);

        // コンポーネントの生成
        Component3D component = new Component3D();

        // シェイプをコンポーネントに追加
        component.addChild(box);

        <font color="red"><b>// SwingNodeの作成
       SwingNode node = new SwingNode();
        
       // SwingNodeにJPanelを追加
       node.setPanel(new SwingPanel());
        
       // コンポーネントの表示位置の移動
       node.setTranslation(0.1f,0.08f,-0.04f);</b></font>
        
        // コンポーネントをコンテナに追加
        // ここではコンテナを使用していないので、
        // 直接フレームに追加
        frame.addChild(component);
        <font color="red"><b>frame.addChild(node);</b></font>

        // フレームの表示
        // フレームの大きさを設定
        frame.setPreferredSize(new Vector3f(0.1f, 0.08f, 0.06f));

        // フレームの表示
        frame.changeEnabled(true);
        frame.changeVisible(true);

    }
    
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        new TextureBox();

    }
    
}

</pre></td></tr></table>
<br><br>
</li>
<li>
<b>「4.3 Jarベースのアプリケーションの作成と実行」</b> にある <a href="c3.html#jar">「JARベースのアプリケーションの作成」 の ステップ８</a>　を参考して、プロジェクトを構築します。<br>
同ページにある <a href="c3.html#run">「JARベースのアプリケーションの実行」</a> を参考して、アプリケーションの実行を行います。<br><br>
実行画面は下図のようになります。
<br><br><br>
<img src="pictures/c8_04.jpg">
</li>
</ol>
<hr>
<h3>SwingNodeにフレームをつける</h3>
<p>
JFrameを利用してSwingコンポーネントを作成した場合、自動的にフレームが表示されますが、
SwingNodeを利用した場合、フレームは表示されません。<br><br>
SwingNodeにフレームと同じようなものを表示させたい場合、Shapeを利用して別途作成する必要があります。<br>
SwingNodeの表示サイズはLG3Dを実行する環境、設定により異なります。<br>
そのため、SwingNodeのLG3D上の表示サイズを取得し、それを元にShapeの表示サイズを決定します。<br>
SwingNodeの表示サイズの取得にはSwingNodeのメソッドgetLocalWidth()、getLocalHeight()を利用します。<br>
<br>
</p>
<h3>GlassyPanelの作成</h3>
<p>
フレームとして表示させるシェイプとして、org.jdesktop.lg3d.utils.shape.GlassyPanelクラスを利用します。<br>
GlassyPanelはBox同様にx,y,z座標（すべてfloat)とアピアランスを必要とします。<br>
座標の値を設定する時に、getLocalWidth(),getLocalHeight()を利用します。<br>
</p>
<ol>
<li>
<font color="red"><b>TextureBox.java</b></font>
TextureBox.javaを以下のように書き換えます。<br>
赤(太字)の部分が元のプログラムから変更・追加したところです。<br>
<br><br><br>
<table border="1"><tbody><tr><td><pre>
/*
 * TextureBox.java
 *
 * Created on 2005/09/29, 15:42
 *
 * To change this template, choose Tools | Options and locate the template under
 * the Source Creation and Management node. Right-click the template and choose
 * Open. You can then make changes to the template in the Source Editor.
 */

package texturebox;

/**
 *
 * @author duke
 */

import java.io.IOException;
import java.net.URL;
import java.lang.ClassLoader;
import javax.vecmath.Vector3f;
import org.jdesktop.lg3d.sg.Appearance;
import org.jdesktop.lg3d.sg.Shape3D;
import org.jdesktop.lg3d.utils.shape.Box;
<font color="red"><b>import org.jdesktop.lg3d.utils.shape.GlassyPanel;</b></font>
import org.jdesktop.lg3d.utils.shape.SimpleAppearance;
import org.jdesktop.lg3d.wg.Component3D;
import org.jdesktop.lg3d.wg.Frame3D;
import org.jdesktop.lg3d.wg.SwingNode;


public class TextureBox {
    
    /** Creates a new instance of TextureBox */
    public TextureBox() { 
        
        // フレームの生成
        Frame3D frame = new Frame3D();
		
		
        // シェイプの生成および設定
        // ボックス６面の画像を指定した Appearance の設定
        Appearance appearanceFront = null;
        Appearance appearanceRight = null;
        Appearance appearanceLeft = null;
        Appearance appearanceTop = null;
        Appearance appearanceBottom = null;
        Appearance appearanceBack = null;
        URL url = null;
        ClassLoader loader = this.getClass().getClassLoader();

        
        // SimpleAppearance オブジェクトを作成する際に、
        // テクスチャファイルの読み込みに失敗した場合 IOException
        // を発生させますので、それに対応するためにException処理を追加
        try {
           url = loader.getResource("photo01.jpg");
           appearanceFront = new SimpleAppearance( url );
           url = loader.getResource("photo02.jpg");
           appearanceRight = new SimpleAppearance( url );
           url = loader.getResource("photo03.jpg");
           appearanceLeft = new SimpleAppearance( url );
           url = loader.getResource("photo04.jpg");
           appearanceTop = new SimpleAppearance( url );
           url = loader.getResource("photo05.jpg");
           appearanceBottom = new SimpleAppearance( url );
           url = loader.getResource("photo06.jpg");
           appearanceBack = new SimpleAppearance( url );
        } catch (IOException ex) {
            System.err.println("画像ファイルの読み込みに失敗しました。");
            ex.printStackTrace();
        }
        // Box の生成
        // 引数は、幅(x)、高さ(y)、奥行き(z)、フラグ、アピアランス
        // Box.GENERATE_TEXTURE_COORDS は
        // Boxオブジェクトで テクスチャを利用するために必要なフラグです
        // 6面の Appearance を貼り付けるため、とりあえず Box の Appearance を null にします。
       Box box = new Box(0.05f, 0.04f, 0.03f, Box.GENERATE_TEXTURE_COORDS, null);
        
       // 正面
       Shape3D shape = box.getShape(Box.FRONT);
       shape.setAppearance(appearanceFront);

       // 右側
       shape = box.getShape(Box.RIGHT);
       shape.setAppearance(appearanceRight);

       // 左側
       shape = box.getShape(Box.LEFT);
       shape.setAppearance(appearanceLeft);

       // 上
       shape = box.getShape(Box.TOP);
       shape.setAppearance(appearanceTop);

       // 下(底面)
       shape = box.getShape(Box.BOTTOM);
       shape.setAppearance(appearanceBottom);

       // 後
       shape = box.getShape(Box.BACK);
       shape.setAppearance(appearanceBack);

        // コンポーネントの生成
        Component3D component = new Component3D();

        // シェイプをコンポーネントに追加
        component.addChild(box);

         // SwingNodeの作成
        SwingNode node = new SwingNode();
        
       // SwingNodeにJPanelを追加
        node.setPanel(new SwingPanel());
        
        
        <font color="red"><b>// GlassPanelのアピアランスの作成
        Appearance glassyAppearance = new SimpleAppearance(0.6f,1.0f,0.6f,1.0f);
        
        // GlassPanelの作成　x,y座標はSwingNodeのLG3D上のサイズ＋０.05fを指定
        GlassyPanel glassyPanel = new GlassyPanel(node.getLocalWidth()+0.005f,node.getLocalHeight()+0.005f,0.005f,glassyAppearance);
        
        // GlassPanelをSwingNodeに追加
        node.addChild(glassyPanel);</b></font>
        
        // コンポーネントの表示位置の移動
        node.setTranslation(0.1f,0.08f,0.04f);
        
        // コンポーネントをコンテナに追加
        // ここではコンテナを使用していないので、
        // 直接フレームに追加
        frame.addChild(component);
        frame.addChild(node);

        // フレームの表示
        // フレームの大きさを設定
        frame.setPreferredSize(new Vector3f(0.1f, 0.08f, 0.06f));

        // フレームの表示
        frame.changeEnabled(true);
        frame.changeVisible(true);

    }
    
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        new TextureBox();

    }
    
}
</pre></td></tr></tbody></table>
<br><br><br>
</li>
<li>
<b>「4.3 Jarベースのアプリケーションの作成と実行」</b> にある <a href="c3.html#jar">「JARベースのアプリケーションの作成」 の ステップ８</a>　を参考して、プロジェクトを構築します。<br>
同ページにある <a href="c3.html#run">「JARベースのアプリケーションの実行」</a> を参考して、アプリケーションの実行を行います。<br><br>
実行画面は下図のようになります。<br>
JFileChooserの回りに半透明の緑のシェイプが表示されています。
<br><br><br>
<img src="pictures/c9_01.jpg">
</li>
</ol>
<hr>
<h2>ボックスの画像を変更するアクションを実装する</h2>
<p>前項まででファイルチューザの表示部分を作成しました。<br>
この項ではファイルチューザのアクションを実装します。
TexutreBoxの前面をファイルチューザで選択した画像に変更する処理を作成します。<br>

<ul>
<li>テクスチャの切り替えを可能にする</li>
<li>テクスチャの作成</li>
<li>作成したテクスチャをアピアランスに設定する</li>
</ul>
</p>
<p>
ファイルチューザで指定したファイルからテクスチャを作成する必要があります。
テクスチャの保持には<b>org.jdesktop.lg3d.Texture</b>クラスを利用します。<br>
イメージファイルのロードには<b>javax.imageio.ImageIOクラスのread</b>メソッドを、
ロードしたイメージからテクスチャを作成するには
<b>org.jdesktop.lg3d.sg.utils.image.TextureLoader</b>クラスを利用します。<br>
<b>TextureLoader.getTexture()</b>メソッドでテクスチャを取得することができます。<br>
作成したテクスチャをアピアランスに設定するには、<b>Appearance.setTexture</b>メソッドを使用します。
</p>
<ol>
<li>Swingのアクションイベントを作成します。<br>
NetBeansのGUIエディタを利用すると簡単に作成できます。<br>
SwingPanel.javaの編集画面にすると、右側のパネルに<font color="red"><b>JFileChooserのプロパティ</b></font>がでているのがわかると思います。<br>
プロパティの「<font color="red"><b>イベント</b></font>」を選択し、<font color="red"><b>「actionPerformed」の右側</b></font>をクリックしアクションの名前を入力してください。<br>
<br><br>
<img src="pictures/c8_10.jpg">
<br><br><br>
名前を入力すると以下のように自動でソースコードが作成されます。<br>
<br><br>
<img src="pictures/c8_11.jpg">
<br><br>
</li>
<li>SwingPanel.javaを以下のように変更します。<br>
変更箇所は<font color="red"><b>赤字（太字）</b></font>で示します。<br>
<br>
テクスチャを設定するアピアランスを引数として与えます。<br>
開くボタンを押した際のアクションを作成します。<br>
アクションコマンドとしてApproveSelectionが送られた場合、選択されたファイルからイメージをロードしテクスチャを作成します。<br>
作成したテクスチャをアピアランスに設定します。<br>
<br><br>
<table border><tr><td><pre>
/*
 * SwingPanel.java
 *
 * Created on 2007/06/11, 15:49
 */

package texturebox;

<font color="red"><b>import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;
import org.jdesktop.lg3d.sg.Appearance;
import org.jdesktop.lg3d.sg.Texture;
import org.jdesktop.lg3d.sg.utils.image.TextureLoader;</b></font>

/**
 *
 * @author  duke
 */
public class SwingPanel extends javax.swing.JPanel {
    
    /** Creates new form SwingPanel */
    <font color="red"><b>private Appearance target;</b></font>
    
    public SwingPanel(<font color="red"><b>Appearance target</b></font>) {
        
        <font color="red"><b>if(target==null) {
            throw new IllegalArgumentException("targetオブジェクトが指定されていません");
        }
        this.target = target;</b></font>
        initComponents();
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc=" Generated Code">                          
    private void initComponents() {
        jFileChooser1 = new javax.swing.JFileChooser();

        jFileChooser1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jFileChooser1ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jFileChooser1, javax.swing.GroupLayout.PREFERRED_SIZE, 396, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jFileChooser1, javax.swing.GroupLayout.PREFERRED_SIZE, 214, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
    }// </editor-fold>                        

    private void jFileChooser1ActionPerformed(java.awt.event.ActionEvent evt) {                                              
       // TODO add your handling code here:
        <font color="red"><b>// 開くボタンが押された場合の処理
        if(evt.getActionCommand().trim().equals("ApproveSelection")) {
            try {
                // 選択したファイルの取得
                File file = this.jFileChooser1.getSelectedFile();
                // ファイルからイメージをロード
                BufferedImage image = null;
                image = ImageIO.read(file);
                // イメージからテクスチャを作成
                Texture texture = new TextureLoader(image).getTexture();
                // テクスチャをアピアランスに設定
                target.setTexture(texture);
            } catch(java.io.IOException e){
            }
        }</b></font>
    }   
    
    
    // Variables declaration - do not modify                     
    private javax.swing.JFileChooser jFileChooser1;
    // End of variables declaration                   
    
}

</pre></td></tr></table>
<br><br>
</li>
<li>TextureBox.javaを以下のように変更します。<br>
変更箇所は<font color="red"><b>赤字（太字）</b></font>で示します。<br>
<p>
Appearanceオブジェクトは、デフォルトではテクスチャの切り替えができません。<br>
テクスチャを切り替えられるようにするには<b>setCapability()</b>メソッドを引数<b>Appearance.ALLOW_TEXTURE_WRITE</b>を指定してコールします。<br>
今回は、ボックスの前面の画像を指定するので、appearanceFrontを切り替えられるようにします。
</p>
<table border><tr><td><pre>
/*
 * TextureBox.java
 *
 * Created on 2005/09/29, 15:42
 *
 * To change this template, choose Tools | Options and locate the template under
 * the Source Creation and Management node. Right-click the template and choose
 * Open. You can then make changes to the template in the Source Editor.
 */

package texturebox;

/**
 *
 * @author duke
 */

import java.io.IOException;
import java.net.URL;
import java.lang.ClassLoader;
import javax.vecmath.Vector3f;
import org.jdesktop.lg3d.sg.Appearance;
import org.jdesktop.lg3d.sg.Shape3D;
import org.jdesktop.lg3d.utils.shape.Box;
import org.jdesktop.lg3d.utils.shape.SimpleAppearance;
import org.jdesktop.lg3d.wg.Component3D;
import org.jdesktop.lg3d.wg.Frame3D;
import org.jdesktop.lg3d.wg.SwingNode;


public class TextureBox {
    
    /** Creates a new instance of TextureBox */
    public TextureBox() { 
        
        // フレームの生成
        Frame3D frame = new Frame3D();
		
		
        // シェイプの生成および設定
        // ボックス６面の画像を指定した Appearance の設定
        Appearance appearanceFront = null;
        Appearance appearanceRight = null;
        Appearance appearanceLeft = null;
        Appearance appearanceTop = null;
        Appearance appearanceBottom = null;
        Appearance appearanceBack = null;
        URL url = null;
        ClassLoader loader = this.getClass().getClassLoader();

        
        // SimpleAppearance オブジェクトを作成する際に、
        // テクスチャファイルの読み込みに失敗した場合 IOException
        // を発生させますので、それに対応するためにException処理を追加
        try {
           url = loader.getResource("photo01.jpg");
           appearanceFront = new SimpleAppearance( url );
           <font color="red"><b>// 前面のアピアランスを切替可能にする
           appearanceFront.setCapability(Appearance.ALLOW_TEXTURE_WRITE);</b></font>
           url = loader.getResource("photo02.jpg");
           appearanceRight = new SimpleAppearance( url );
           url = loader.getResource("photo03.jpg");
           appearanceLeft = new SimpleAppearance( url );
           url = loader.getResource("photo04.jpg");
           appearanceTop = new SimpleAppearance( url );
           url = loader.getResource("photo05.jpg");
           appearanceBottom = new SimpleAppearance( url );
           url = loader.getResource("photo06.jpg");
           appearanceBack = new SimpleAppearance( url );
        } catch (IOException ex) {
            System.err.println("画像ファイルの読み込みに失敗しました。");
            ex.printStackTrace();
        }
        // Box の生成
        // 引数は、幅(x)、高さ(y)、奥行き(z)、フラグ、アピアランス
        // Box.GENERATE_TEXTURE_COORDS は
        // Boxオブジェクトで テクスチャを利用するために必要なフラグです
        // 6面の Appearance を貼り付けるため、とりあえず Box の Appearance を null にします。
       Box box = new Box(0.05f, 0.04f, 0.03f, Box.GENERATE_TEXTURE_COORDS, null);
        
       // 正面
       Shape3D shape = box.getShape(Box.FRONT);
       shape.setAppearance(appearanceFront);

       // 右側
       shape = box.getShape(Box.RIGHT);
       shape.setAppearance(appearanceRight);

       // 左側
       shape = box.getShape(Box.LEFT);
       shape.setAppearance(appearanceLeft);

       // 上
       shape = box.getShape(Box.TOP);
       shape.setAppearance(appearanceTop);

       // 下(底面)
       shape = box.getShape(Box.BOTTOM);
       shape.setAppearance(appearanceBottom);

       // 後
       shape = box.getShape(Box.BACK);
       shape.setAppearance(appearanceBack);

        // コンポーネントの生成
        Component3D component = new Component3D();

        // シェイプをコンポーネントに追加
        component.addChild(box);

         // SwingNodeの作成
        SwingNode node = new SwingNode();
        
       // SwingNodeにJPanelを追加
        node.setPanel(new SwingPanel(<font color="red"><b>appearanceFront</b></font>));
        
        // コンポーネントの表示位置の移動
        node.setTranslation(0.1f,0.08f,-0.04f);
        
        // コンポーネントをコンテナに追加
        // ここではコンテナを使用していないので、
        // 直接フレームに追加
        frame.addChild(component);
        frame.addChild(node);

        // フレームの表示
        // フレームの大きさを設定
        frame.setPreferredSize(new Vector3f(0.1f, 0.08f, 0.06f));

        // フレームの表示
        frame.changeEnabled(true);
        frame.changeVisible(true);

    }
    
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        new TextureBox();

    }
    
}

</pre></td></tr></table>
<br><br>
</li>
<li>
<b>「4.3 Jarベースのアプリケーションの作成と実行」</b> にある <a href="c3.html#jar">「JARベースのアプリケーションの作成」 の ステップ８</a>　を参考して、プロジェクトを構築します。<br>
同ページにある <a href="c3.html#run">「JARベースのアプリケーションの実行」</a> を参考して、アプリケーションの実行を行います。<br><br>
実行画面は下図のようになります。<br>
画像ファイルを選択して「開く」ボタンを押すと、ボックスの前面の画像が切り替わります。
<br><br><br>
<img src="pictures/c8_05.jpg">
</li>
</ol>
<hr>
<ul>
<li><a href="index.html">メニューに戻る</a>
</ul>
</body>
</html>
